{% extends 'base/base.html' %}
{% load static %}

{% block title %}主题 - 我的网站{% endblock %}

{% block content %}
<div class="main-container">
  <aside class="sidebar">
    <div class="sidebar-card">
      <h2 class="sidebar-title">主题分类</h2>
      <ul class="sidebar-menu">
        <li class="menu-item active">
          <a href="#" data-category="data">数据科学</a>
        </li>
        <li class="menu-item">
          <a href="#" data-category="web">Web开发</a>
        </li>
        <li class="menu-item">
          <a href="#" data-category="ai">机器学习</a>
        </li>
        <li class="menu-item">
          <a href="#" data-category="automation">自动化</a>
        </li>
      </ul>
    </div>
  </aside>

  <main class="content">
    <div class="article-card">
      <h1 class="article-title">学习主题</h1>
      <div class="theme-cards" id="themeCards">
        <!-- 数据科学分类 -->
        <div class="theme-card" data-category="data">
          <h3 class="theme-title">数据科学</h3>
          <p class="theme-desc">学习如何使用Python进行数据分析和可视化</p>
        </div>
        <div class="theme-card" data-category="data">
          <h3 class="theme-title">数据分析</h3>
          <p class="theme-desc">使用pandas和numpy处理和分析数据</p>
        </div>
        <div class="theme-card" data-category="data">
          <h3 class="theme-title">数据可视化</h3>
          <p class="theme-desc">使用matplotlib和seaborn创建精美的图表</p>
        </div>
        
        <!-- Web开发分类 -->
        <div class="theme-card" data-category="web">
          <h3 class="theme-title">Web开发</h3>
          <p class="theme-desc">使用Django和Flask构建现代Web应用</p>
        </div>
        <div class="theme-card" data-category="web">
          <h3 class="theme-title">前端开发</h3>
          <p class="theme-desc">学习HTML、CSS、JavaScript和前端框架</p>
        </div>
        <div class="theme-card" data-category="web">
          <h3 class="theme-title">后端开发</h3>
          <p class="theme-desc">掌握服务器端编程和API设计</p>
        </div>
        
        <!-- 机器学习分类 -->
        <div class="theme-card" data-category="ai">
          <h3 class="theme-title">机器学习</h3>
          <p class="theme-desc">探索AI和机器学习的Python实现</p>
        </div>
        <div class="theme-card" data-category="ai">
          <h3 class="theme-title">深度学习</h3>
          <p class="theme-desc">使用TensorFlow和PyTorch构建神经网络</p>
        </div>
        <div class="theme-card" data-category="ai">
          <h3 class="theme-title">自然语言处理</h3>
          <p class="theme-desc">学习文本分析和NLP技术</p>
        </div>
        
        <!-- 自动化分类 -->
        <div class="theme-card" data-category="automation">
          <h3 class="theme-title">自动化</h3>
          <p class="theme-desc">使用Python自动化日常任务和工作流</p>
        </div>
        <div class="theme-card" data-category="automation">
          <h3 class="theme-title">网络爬虫</h3>
          <p class="theme-desc">学习如何抓取和分析网络数据</p>
        </div>
        <div class="theme-card" data-category="automation">
          <h3 class="theme-title">API开发</h3>
          <p class="theme-desc">构建RESTful API和微服务</p>
        </div>
      </div>
    </div>
  </main>
</div>

<script>
// 主题页面左侧栏切换 - 简洁高效版本
(function() {
  'use strict';
  
  function init() {
    const menuItems = document.querySelectorAll('.menu-item a');
    const themeCards = document.querySelectorAll('.theme-card');
    
    if (!menuItems.length || !themeCards.length) return;
    
    // 绑定点击事件
    menuItems.forEach(item => {
      item.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        // 移除所有active状态
        menuItems.forEach(link => {
          link.closest('.menu-item').classList.remove('active');
        });
        
        // 添加当前active状态
        this.closest('.menu-item').classList.add('active');
        
        // 获取分类
        const category = this.getAttribute('data-category');
        
        if (category) {
          // 显示/隐藏主题卡片
          themeCards.forEach(card => {
            const cardCategory = card.getAttribute('data-category');
            if (cardCategory === category) {
              card.style.display = '';
            } else {
              card.style.display = 'none';
            }
          });
        }
        
        // 移除焦点，防止样式闪烁
        this.blur();
      });
    });
    
    // 默认显示第一个分类（数据科学）
    const firstActive = document.querySelector('.menu-item.active a');
    if (firstActive) {
      const defaultCategory = firstActive.getAttribute('data-category');
      if (defaultCategory) {
        themeCards.forEach(card => {
          const cardCategory = card.getAttribute('data-category');
          if (cardCategory !== defaultCategory) {
            card.style.display = 'none';
          }
        });
      }
    }
  }
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>
{% endblock %}

